<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cálculo de Frete</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .container {
            max-width: 600px;
            margin: auto;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            background-color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2 class="text-center">Cálculo de Frete</h2>
        <form id="freteForm">
            <div class="row">
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="estadoOrigem" class="form-label">Estado de Origem</label>
                        <select class="form-control" id="estadoOrigem" required></select>
                    </div>
                    <div class="mb-3">
                        <label for="cidadeOrigem" class="form-label">Cidade de Origem</label>
                        <select class="form-control" id="cidadeOrigem" required></select>
                    </div>
                    <div class="mb-3">
                        <label for="valorNF" class="form-label">Valor da Nota Fiscal (R$)</label>
                        <input type="number" class="form-control" id="valorNF" required>
                    </div>
                    <div class="mb-3">
                        <label for="pesoCTE" class="form-label">Peso do CTE (kg)</label>
                        <input type="number" class="form-control" id="pesoCTE" required>
                    </div>
                    <div class="mb-3">
                        <label for="seguro" class="form-label">Seguro (%)</label>
                        <input type="number" class="form-control" id="seguro">
                    </div>
                    <div class="mb-3">
                        <label for="gris" class="form-label">GRIS (%)</label>
                        <input type="number" class="form-control" id="gris">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="estadoDestino" class="form-label">Estado de Destino</label>
                        <select class="form-control" id="estadoDestino" required></select>
                    </div>
                    <div class="mb-3">
                        <label for="cidadeDestino" class="form-label">Cidade de Destino</label>
                        <select class="form-control" id="cidadeDestino" required></select>
                    </div>
                    <div class="mb-3">
                        <label for="valorCTE" class="form-label">Valor do CTE (R$)</label>
                        <input type="number" class="form-control" id="valorCTE" required>
                    </div>
                    <div class="mb-3">
                        <label for="custoDescargaTon" class="form-label">Custo Descarga (R$/tonelada)</label>
                        <input type="number" class="form-control" id="custoDescargaTon">
                    </div>
                    <div class="mb-3">
                        <label for="custoDescargaVeiculo" class="form-label">Custo Descarga por Veículo (R$)</label>
                        <input type="number" class="form-control" id="custoDescargaVeiculo">
                    </div>
                    <div class="mb-3">
                        <label for="transportadora" class="form-label">Nome da Transportadora</label>
                        <input type="text" class="form-control" id="transportadora">
                    </div>
                </div>
            </div>
            <button type="button" class="btn btn-primary w-100" onclick="calcularFrete()">Calcular</button>
        </form>

        <div class="mt-4" id="resultado" style="display: none;">
            <h4>Resultado</h4>
            <p><strong>R$/tonelada:</strong> <span id="resultadoTon"></span></p>
            <p><strong>% do Frete:</strong> <span id="resultadoFrete"></span></p>
            <p><strong>Valor do Seguro:</strong> <span id="resultadoSeguro"></span></p>
            <p><strong>Valor da Descarga:</strong> <span id="resultadoDescarga"></span></p>
        </div>
    </div>

    <script>
        function carregarEstados() {
            fetch('https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome')
                .then(response => response.json())
                .then(estados => {
                    const estadoOrigemSelect = document.getElementById('estadoOrigem');
                    const estadoDestinoSelect = document.getElementById('estadoDestino');
                    estados.forEach(estado => {
                        const option = document.createElement('option');
                        option.value = estado.id;
                        option.textContent = estado.nome;
                        estadoOrigemSelect.appendChild(option.cloneNode(true));
                        estadoDestinoSelect.appendChild(option);
                    });
                });
        }

        function carregarCidades(estadoId, cidadeSelectId) {
            fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${estadoId}/municipios?orderBy=nome`)
                .then(response => response.json())
                .then(cidades => {
                    const cidadeSelect = document.getElementById(cidadeSelectId);
                    cidadeSelect.innerHTML = '<option value="">Selecione a cidade</option>';
                    cidades.forEach(cidade => {
                        const option = document.createElement('option');
                        option.value = cidade.nome;
                        option.textContent = cidade.nome;
                        cidadeSelect.appendChild(option);
                    });
                });
        }

        document.getElementById('estadoOrigem').addEventListener('change', function() {
            carregarCidades(this.value, 'cidadeOrigem');
        });

        document.getElementById('estadoDestino').addEventListener('change', function() {
            carregarCidades(this.value, 'cidadeDestino');
        });

        document.addEventListener('DOMContentLoaded', carregarEstados);
    </script>
</body>
</html>
